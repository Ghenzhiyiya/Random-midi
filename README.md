# 🎵 黄金分割MIDI生成器

基于黄金分割比例和乐理知识的随机MIDI音乐生成软件

## ✨ 特性

- 🌟 **黄金分割算法**: 使用黄金分割比例 (φ ≈ 1.618) 控制音乐的各个方面
- 🎼 **乐理知识**: 内置多种音阶和和弦进行
- 🎹 **多种乐器**: 支持钢琴、吉他、贝斯、弦乐等8种乐器
- ⚙️ **可自定义**: 控制台界面可调节速度、时长等参数
- 🎲 **智能随机**: 结合随机数和黄金分割数生成音乐
- 📁 **MIDI输出**: 生成标准MIDI文件，兼容各种音乐软件

## 🔬 黄金分割在音乐中的应用

### 数学原理
- **黄金分割比例**: φ = (1 + √5) / 2 ≈ 1.618033988749
- **斐波那契数列**: 1, 1, 2, 3, 5, 8, 13, 21...
- **比例关系**: 相邻斐波那契数的比值趋近于黄金分割

### 音乐应用
1. **音符时值**: 使用 1/φ, 1, φ, φ² 的比例控制音符长短
2. **音程间隔**: 将黄金分割映射到半音间隔
3. **旋律起伏**: 基于φ的周期性控制音高变化
4. **力度变化**: 使用正弦函数和φ控制音符强弱
5. **结构布局**: 斐波那契数列影响音符选择和八度变化

## 🛠️ 安装

### 环境要求
- Python 3.7+
- Windows/macOS/Linux

### 安装步骤

1. **克隆或下载项目**
```bash
cd "Random midi"
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **运行程序**
```bash
python main.py
```

## 🎮 使用方法

### 控制台界面
启动程序后，您将看到交互式菜单：

```
🎵 黄金分割MIDI生成器 🎵
==================================================
当前设置:
  乐器: 钢琴 (编号: 1)
  速度: 120 BPM
  时长: 60 秒
  黄金分割比例: 1.618034

选项:
1. 选择乐器
2. 设置速度 (BPM)
3. 设置时长 (秒)
4. 生成MIDI文件
5. 显示黄金分割信息
0. 退出
```

### 功能说明

#### 1. 选择乐器
支持8种MIDI乐器：
- 1: 钢琴
- 25: 吉他
- 33: 贝斯
- 49: 弦乐
- 57: 小号
- 65: 萨克斯
- 73: 长笛
- 81: 合成器

#### 2. 设置速度
- 范围: 30-300 BPM
- 建议: 60-200 BPM
- 影响: 音乐播放速度和音符密度

#### 3. 设置时长
- 范围: 5-600 秒
- 建议: 10-300 秒
- 影响: 生成的音乐长度

#### 4. 生成MIDI文件
程序将：
- 随机选择音阶（大调、小调、五声音阶、布鲁斯）
- 随机选择和弦进行（流行、爵士、古典）
- 使用黄金分割算法生成旋律
- 保存为 `golden_midi_[时间戳].mid` 文件

#### 5. 显示黄金分割信息
查看：
- 黄金分割比例的精确值
- 斐波那契数列
- 在音乐中的具体应用

## 🎼 音乐理论基础

### 支持的音阶
- **大调音阶**: 明亮、欢快的感觉
- **小调音阶**: 忧郁、深沉的感觉
- **五声音阶**: 东方风格、简洁优美
- **布鲁斯音阶**: 蓝调风格、富有表现力

### 和弦进行
- **流行进行**: I-vi-IV-V (如 C-Am-F-G)
- **爵士进行**: I-iii-vi-ii (如 C-Em-Am-Dm)
- **古典进行**: I-V-I-vi (如 C-G-C-Am)

## 🔧 技术实现

### 核心算法

1. **黄金分割时值计算**
```python
def golden_ratio_timing(self, base_duration):
    ratios = [1/self.phi, 1, self.phi, self.phi**2]
    return [int(base_duration * ratio) for ratio in ratios]
```

2. **斐波那契旋律生成**
```python
def generate_melody(self, scale_notes, num_notes):
    fib_seq = self.fibonacci_sequence(num_notes)
    for i in range(num_notes):
        phi_factor = (i * self.phi) % 1
        # 结合黄金分割和随机性选择音符
```

3. **黄金分割音程**
```python
def golden_ratio_intervals(self, root_note):
    phi_intervals = [int(self.phi * n) for n in range(1, 6)]
    return [(root_note + interval) % 128 for interval in phi_intervals]
```

### 文件结构
```
Random midi/
├── main.py              # 主程序文件
├── requirements.txt     # 依赖包列表
├── README.md           # 项目说明
└── golden_midi_*.mid   # 生成的MIDI文件
```

## 🎯 示例输出

生成的MIDI文件特点：
- 音符时值遵循黄金分割比例
- 旋律线条具有自然的起伏
- 音程跳跃符合黄金分割间隔
- 力度变化呈现周期性规律
- 整体结构体现斐波那契序列

## 🔍 高级特性

### 黄金分割的深度应用
1. **时间结构**: 使用φ控制乐句长度和休止符位置
2. **音高分布**: 基于斐波那契数列选择音符和八度
3. **动态变化**: 力度和音色变化遵循黄金分割周期
4. **和声进行**: 和弦转换时机基于φ的倍数

### 随机性与确定性的平衡
- 使用黄金分割提供结构性框架
- 引入适度随机性增加音乐的不可预测性
- 确保生成的音乐既有数学美感又富有变化

## 🎨 创作理念

这个软件的设计理念是将数学之美与音乐艺术相结合：

- **自然比例**: 黄金分割在自然界中广泛存在，将其应用到音乐中可以创造出符合人类审美直觉的作品
- **结构与自由**: 在数学规律的框架内保持创作的自由度
- **传统与创新**: 结合传统乐理知识和现代算法技术
- **简单与复杂**: 简单的操作界面背后是复杂的数学和音乐理论

## 🚀 未来扩展

可能的功能扩展：
- 支持更多音阶和调式
- 添加节奏模式生成
- 实现多声部和声
- 支持实时MIDI输出
- 添加音乐风格模板
- 集成机器学习算法

## 📝 许可证

本项目采用 MIT 许可证，您可以自由使用、修改和分发。

## 🤝 贡献

欢迎提交问题报告、功能建议或代码贡献！

---

*让数学与音乐在黄金分割的和谐中相遇* ✨